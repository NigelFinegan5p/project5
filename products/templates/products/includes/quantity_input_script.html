<script>
document.addEventListener("DOMContentLoaded", function() {
    // Iterate over all decrement buttons and update the IDs dynamically
    document.querySelectorAll('.decrement-qty').forEach(function(button) {
        var itemId = button.getAttribute('data-item_id');
        button.id = 'decrement-qty_' + itemId; // Create unique ID
    });

    // Iterate over all increment buttons and update the IDs dynamically
    document.querySelectorAll('.increment-qty').forEach(function(button) {
        var itemId = button.getAttribute('data-item_id');
        button.id = 'increment-qty_' + itemId; // Create unique ID
    });

    // Iterate over all quantity input fields and update the IDs dynamically
    document.querySelectorAll('.qty_input').forEach(function(input) {
        var itemId = input.getAttribute('data-item_id');
        input.id = 'id_qty_' + itemId; // Create unique ID
    });
    
    // Now, you can safely apply the previous logic to enable/disable buttons
    // Disable +/- buttons outside 1-99 range
    function handleEnableDisable(itemId) {
        var currentValue = parseInt(document.getElementById('id_qty_' + itemId).value);
        var minusDisabled = currentValue < 2;
        var plusDisabled = currentValue > 98;
        document.getElementById('decrement-qty_' + itemId).disabled = minusDisabled;
        document.getElementById('increment-qty_' + itemId).disabled = plusDisabled;
    }

    // Ensure proper enabling/disabling of all inputs on page load
    var allQtyInputs = document.querySelectorAll('.qty_input');
    allQtyInputs.forEach(function(input) {
        var itemId = input.getAttribute('data-item_id');
        handleEnableDisable(itemId);
    });

    // Check enable/disable every time the input is changed
    allQtyInputs.forEach(function(input) {
        input.addEventListener('change', function() {
            var itemId = input.getAttribute('data-item_id');
            handleEnableDisable(itemId);
        });
    });

    // Increment quantity
    document.querySelectorAll('.increment-qty').forEach(function(button) {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            var closestInput = button.closest('.input-group').querySelector('.qty_input');
            var currentValue = parseInt(closestInput.value);
            closestInput.value = currentValue + 1;
            var itemId = button.getAttribute('data-item_id');
            handleEnableDisable(itemId);
        });
    });

    // Decrement quantity
    document.querySelectorAll('.decrement-qty').forEach(function(button) {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            var closestInput = button.closest('.input-group').querySelector('.qty_input');
            var currentValue = parseInt(closestInput.value);
            closestInput.value = currentValue - 1;
            var itemId = button.getAttribute('data-item_id');
            handleEnableDisable(itemId);
        });
    });
});
</script>




